{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/js/render-function.js","../src/js/modal.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://dummyjson.com';\n\nexport async function getCategoryList() {\n  const respons = await axios(`/products/category-list?`);\n  return respons.data;\n}\n\nexport async function getProducts(page = 1) {\n  const respons = await axios('products?', {\n    params: {\n      limit: 12,\n      skip: (page - 1) * 12,\n    },\n  });\n  return respons.data;\n}\n\nexport async function getCategoryByValue(endPoint, page = 1) {\n  const respons = await axios('/products/category/' + endPoint, {\n    params: {\n      limit: 12,\n      skip: (page - 1) * 12,\n    },\n  });\n  return respons.data;\n}\n\nexport async function getOneProductById(id) {\n  const respons = await axios(`/products/${id}`);\n  return respons.data;\n}\n\nexport async function getSearchCategory(value, page = 1) {\n  const respons = await axios(`/products/search?q=${value}`, {\n    params: {\n      limit: 12,\n      skip: (page - 1) * 12,\n    },\n  });\n  return respons.data;\n}\n","export function createCategoryMarkup(arr) {\n  return arr\n    .map(\n      item => `\n  <li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${item}</button>\n </li>`\n    )\n    .join('');\n}\nexport function createProductsMarkup(arr) {\n  return arr\n    .map(\n      ({ id, images, description, title, category, price, brand }) => `\n  <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${images[0]}\" alt=\"${description}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand}</span></p>\n    <p class=\"products__category\">Category: ${category} </p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>\n`\n    )\n    .join('');\n}\n\nexport function createModalMarkup({\n  images,\n  title,\n  tags,\n  description,\n  shippingInformation,\n  returnPolicy,\n  price,\n}) {\n  return `\n<img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${\n          tags?.map(tag => `<li>${tag}</li>`).join('') || ''\n        }</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${price}$</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>\n`;\n}\n","import { createModalMarkup } from './render-function';\n\nconst modalEl = document.querySelector('.modal');\nconst modalProductEl = document.querySelector('.modal-product');\nconst modalCloseBtn = document.querySelector('.modal__close-btn');\n\nmodalCloseBtn.addEventListener('click', closeModal);\n\nexport function showModal(obj) {\n  modalProductEl.innerHTML = createModalMarkup(obj);\n  modalEl.classList.add('modal--is-open');\n}\n\nexport function closeModal() {\n  modalEl.classList.remove('modal--is-open');\n  modalProductEl.innerHTML = '';\n}\n\nmodalEl.addEventListener('click', e => {\n  if (e.target === modalEl) {\n    closeModal();\n  }\n});\n","import {\n  getCategoryByValue,\n  getProducts,\n  getOneProductById,\n  getSearchCategory,\n} from './products-api';\nimport { createProductsMarkup } from './render-function';\nimport { productsList, state, loadMoreBtn } from '../home';\nimport { showModal } from './modal';\nimport axios from 'axios';\n\nconst notFoundEl = document.querySelector('div.not-found');\n\nexport async function handleCategoryClick(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  const category = event.target.textContent;\n\n  state.currentCategory = category;\n  state.currentPage = 1;\n  loadMoreBtn.disabled = true;\n\n  try {\n    let res;\n    if (category === 'All') {\n      res = await getProducts(state.currentPage);\n    } else {\n      res = await getCategoryByValue(category, state.currentPage);\n      if (res.products.length === 0) {\n        notFoundEl.classList.add('not-found--visible');\n        productsList.innerHTML = '';\n        loadMoreBtn.classList.add('is-hidden');\n        return;\n      }\n    }\n\n    productsList.innerHTML = createProductsMarkup(res.products);\n    updateLoadMoreBtn(res.total);\n\n    notFoundEl.classList.remove('not-found--visible');\n\n    document\n      .querySelectorAll('.categories__btn')\n      .forEach(btn => btn.classList.remove('categories__btn--active'));\n    event.target.classList.add('categories__btn--active');\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loadMoreBtn.disabled = false;\n    state.currentSearch = '';\n  }\n}\n\nexport async function handleProductClick(event) {\n  if (event.target === event.currentTarget) {\n    return;\n  }\n  const currentProduct = event.target.closest('.products__item');\n  const id = currentProduct.dataset.id;\n  try {\n    const data = await getOneProductById(id);\n    showModal(data);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport async function onLoadMore() {\n  state.currentPage += 1;\n  let res;\n  try {\n    if (state.currentSearch) {\n      res = await getSearchCategory(state.currentSearch, state.currentPage);\n    } else if (state.currentCategory === 'All') {\n      res = await getProducts(state.currentPage);\n      state.currentSearch = '';\n    } else {\n      res = await getCategoryByValue(state.currentCategory, state.currentPage);\n    }\n\n    productsList.insertAdjacentHTML(\n      'beforeend',\n      createProductsMarkup(res.products)\n    );\n    updateLoadMoreBtn(res.total);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction updateLoadMoreBtn(total) {\n  state.totalPages = Math.ceil(total / state.limit);\n  loadMoreBtn.classList.toggle(\n    'is-hidden',\n    state.currentPage >= state.totalPages\n  );\n}\n\nexport async function hendleSearchSubmit(event) {\n  event.preventDefault();\n  state.currentPage = 1;\n\n  const value = event.target.elements.searchValue.value.trim();\n  if (value === '') {\n    return;\n  }\n  try {\n    const data = await getSearchCategory(value, state.currentPage);\n    state.currentSearch = value;\n    if (data.products.length === 0) {\n      console.log('noting');\n      productsList.innerHTML = '';\n      notFoundEl.classList.add('not-found--visible');\n      return;\n    }\n    productsList.innerHTML = createProductsMarkup(data.products);\n    updateLoadMoreBtn(data.total);\n    notFoundEl.classList.remove('not-found--visible');\n  } catch (error) {\n    console.log(error);\n  } finally {\n    event.target.reset();\n  }\n}\n\nexport async function handleSearchClear() {\n  const input = document.querySelector('.search-form__input');\n  input.value = '';\n  state.currentSearch = '';\n  state.currentPage = 1;\n  try {\n    const res = await getProducts(state.currentPage);\n    productsList.innerHTML = createProductsMarkup(res.products);\n    updateLoadMoreBtn(res.total);\n    notFoundEl.classList.remove('not-found--visible');\n  } catch (error) {\n    console.log(error);\n  }\n}\n","//Логіка сторінки Home\nimport {\n  getCategoryList,\n  getProducts,\n  getCategoryByValue,\n} from './js/products-api';\nimport {\n  createCategoryMarkup,\n  createProductsMarkup,\n} from './js/render-function';\nimport {\n  handleCategoryClick,\n  handleProductClick,\n  onLoadMore,\n  hendleSearchSubmit,\n  handleSearchClear,\n} from './js/handlers';\n\n// let currentPage = 1;\n// const limit = 12;\nexport const state = {\n  currentPage: 1,\n  currentCategory: 'All',\n  limit: 12,\n  totalPages: 1,\n  currentSearch: '',\n};\n\nconst categoriesList = document.querySelector('ul.categories');\nexport const loadMoreBtn = document.querySelector('.load-more-btn');\nexport const productsList = document.querySelector('ul.products');\nconst searchFormEl = document.querySelector('.search-form');\nconst clearBtnEl = document.querySelector('button.search-form__btn-clear');\n\ncategoriesList.addEventListener('click', handleCategoryClick);\nproductsList.addEventListener('click', handleProductClick);\nloadMoreBtn.addEventListener('click', onLoadMore);\nsearchFormEl.addEventListener('submit', hendleSearchSubmit);\nclearBtnEl.addEventListener('click', handleSearchClear);\n\ngetCategoryList()\n  .then(res => {\n    const markup = ['All', ...res];\n    categoriesList.innerHTML = createCategoryMarkup(markup);\n  })\n  .catch(error => {\n    console.log(error.message);\n  });\n\ngetProducts(state.currentPage)\n  .then(res => {\n    const { products, total } = res;\n    state.totalPages = Math.ceil(total / state.limit);\n    productsList.innerHTML = createProductsMarkup(products);\n    if (state.totalPages > state.limit) {\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n  })\n  .catch(error => {\n    console.log(error.message);\n  });\n"],"names":["axios","getCategoryList","getProducts","page","getCategoryByValue","endPoint","getOneProductById","id","getSearchCategory","value","createCategoryMarkup","arr","item","createProductsMarkup","images","description","title","category","price","brand","createModalMarkup","tags","shippingInformation","returnPolicy","tag","modalEl","modalProductEl","modalCloseBtn","closeModal","showModal","obj","e","notFoundEl","handleCategoryClick","event","state","loadMoreBtn","res","productsList","updateLoadMoreBtn","btn","error","handleProductClick","data","onLoadMore","total","hendleSearchSubmit","handleSearchClear","input","categoriesList","searchFormEl","clearBtnEl","markup","products"],"mappings":"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"}