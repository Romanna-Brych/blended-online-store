import{a as p}from"./vendor-CWxt7QI6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();function v(t){const e=document.querySelector("span.nav__count[data-cart-count]");e.textContent=t.length}function L(t){const e=document.querySelector("span.nav__count[data-wishlist-count]");e.textContent=t.length}p.defaults.baseURL="https://dummyjson.com";async function Q(){return(await p("/products/category-list?")).data}async function P(t=1){return(await p("products?",{params:{limit:12,skip:(t-1)*12}})).data}async function q(t,e=1){return(await p("/products/category/"+t,{params:{limit:12,skip:(e-1)*12}})).data}async function w(t){return(await p(`/products/${t}`)).data}async function T(t,e=1){return(await p(`/products/search?q=${t}`,{params:{limit:12,skip:(e-1)*12}})).data}function X(t){return t.map(e=>`
  <li class="categories__item">
   <button class="categories__btn" type="button">${e}</button>
 </li>`).join("")}function m(t){return t.map(({id:e,images:o,description:c,title:n,category:s,price:l,brand:S})=>`
  <li class="products__item" data-id="${e}">
    <img class="products__image" src="${o[0]}" alt="${c}"/>
    <p class="products__title">${n}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${S}</span></p>
    <p class="products__category">Category: ${s} </p>
    <p class="products__price">Price: ${l}$</p>
 </li>
`).join("")}function N({images:t,title:e,tags:o,description:c,shippingInformation:n,returnPolicy:s,price:l}){return`
<img class="modal-product__img" src="${t[0]}" alt="${e}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">${(o==null?void 0:o.map(S=>`<li>${S}</li>`).join(""))||""}</ul>
        <p class="modal-product__description">${c}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${s}</p>
        <p class="modal-product__price">Price: ${l}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
`}function a(){return JSON.parse(localStorage.getItem("cart"))||[]}function W(t){localStorage.setItem("cart",JSON.stringify(t))}function i(){return JSON.parse(localStorage.getItem("wishlist"))||[]}function x(t){localStorage.setItem("wishlist",JSON.stringify(t))}const h=document.querySelector(".load-more-btn"),u=document.querySelector("ul.products"),r={currentPage:1,currentCategory:"All",limit:12,totalPages:1,currentSearch:""},y=document.querySelector("ul.products"),b=document.querySelector("div.not-found"),B=document.querySelector(".cart-summary__value[data-count]"),H=document.querySelector(".cart-summary__value[data-price]");y&&B&&H&&(y.addEventListener("click",A),document.addEventListener("cart-updated",E),E(),v(a()),L(i()));function F(t){const e=a();e.includes(t)||(e.push(t),W(e),v(e),document.dispatchEvent(new Event("cart-updated")))}function R(t){const e=a().filter(o=>o!==t);W(e),v(e),document.dispatchEvent(new Event("cart-updated"))}async function E(){b.classList.remove("not-found--visible");const t=a();if(t.length>0)try{const e=await Promise.all(t.map(o=>w(o)));y.innerHTML=m(e),M(e),console.log(e)}catch(e){console.log(e)}else b.classList.add("not-found--visible"),y.innerHTML="",M([])}function M(t){const e=t?t.length:0,o=t&&t.length>0?t.reduce((c,n)=>n.price+c,0):0;B.textContent=e,H.textContent=Number(o.toFixed(2))}const d=document.querySelector(".modal"),O=document.querySelector(".modal-product"),j=document.querySelector(".modal__close-btn"),J=d.querySelector(".modal-product__btn--cart"),U=d.querySelector(".modal-product__btn--wishlist");j.addEventListener("click",k);function V(t){O.innerHTML=N(t),d.classList.add("modal--is-open"),D(t.id,J),K(t.id,U)}function k(){d.classList.remove("modal--is-open"),O.innerHTML=""}d.addEventListener("click",t=>{t.target===d&&k()});function D(t,e){e.textContent=a().includes(t)?"Remove from Cart":"Add to Cart",e.onclick=()=>{a().includes(t)?R(t):F(t),e.textContent=a().includes(t)?"Remove from Cart":"Add to Cart"}}function K(t,e){e.textContent=i().includes(t)?"Remove from Wishlist":"Add to Wishlist",e.onclick=()=>{i().includes(t)?G(t):z(t),e.textContent=i().includes(t)?"Remove from Wishlist":"Add to Wishlist"}}const f=document.querySelector("div.not-found");async function Y(t){if(t.target.nodeName!=="BUTTON")return;const e=t.target.textContent;r.currentCategory=e,r.currentPage=1,h.disabled=!0;try{let o;if(e==="All")o=await P(r.currentPage);else if(o=await q(e,r.currentPage),o.products.length===0){f.classList.add("not-found--visible"),u.innerHTML="",h.classList.add("is-hidden");return}u.innerHTML=m(o.products),g(o.total),f.classList.remove("not-found--visible"),document.querySelectorAll(".categories__btn").forEach(c=>c.classList.remove("categories__btn--active")),t.target.classList.add("categories__btn--active")}catch(o){console.log(o)}finally{h.disabled=!1,r.currentSearch=""}}async function A(t){if(t.target===t.currentTarget)return;const o=t.target.closest(".products__item").dataset.id;try{const c=await w(o);V(c)}catch(c){console.log(c)}}async function Z(){r.currentPage+=1;let t;try{r.currentSearch?t=await T(r.currentSearch,r.currentPage):r.currentCategory==="All"?(t=await P(r.currentPage),r.currentSearch=""):t=await q(r.currentCategory,r.currentPage),u.insertAdjacentHTML("beforeend",m(t.products)),g(t.total)}catch(e){console.log(e)}}function g(t){r.totalPages=Math.ceil(t/r.limit),h.classList.toggle("is-hidden",r.currentPage>=r.totalPages)}async function tt(t){t.preventDefault(),r.currentPage=1;const e=t.target.elements.searchValue.value.trim();if(e!=="")try{const o=await T(e,r.currentPage);if(r.currentSearch=e,o.products.length===0){console.log("noting"),u.innerHTML="",f.classList.add("not-found--visible"),g(0);return}u.innerHTML=m(o.products),g(o.total),f.classList.remove("not-found--visible")}catch(o){console.log(o)}finally{t.target.reset()}}async function et(){const t=document.querySelector(".search-form__input");t.value="",r.currentSearch="",r.currentPage=1;try{const e=await P(r.currentPage);u.innerHTML=m(e.products),g(e.total),f.classList.remove("not-found--visible")}catch(e){console.log(e)}}const _=document.querySelector("ul.products"),C=document.querySelector(".js-not-found-whishlist");_&&C&&(_.addEventListener("click",A),document.addEventListener("wish-updated",$),L(i()),v(a()),$());function z(t){const e=i();e.includes(t)||(e.push(t),x(e),L(e),document.dispatchEvent(new Event("wish-updated")))}function G(t){const e=i().filter(o=>o!==t);x(e),L(e),document.dispatchEvent(new Event("wish-updated"))}async function $(){C.classList.remove("not-found--visible");const t=i();if(t.length>0)try{const e=await Promise.all(t.map(o=>w(o)));_.innerHTML=m(e)}catch(e){console.log(e)}else C.classList.add("not-found--visible"),_.innerHTML=""}export{A as a,tt as b,et as c,L as d,i as e,Q as f,a as g,Y as h,X as i,P as j,m as k,h as l,Z as o,u as p,r as s,v as u};
//# sourceMappingURL=wishlist-BwzE1SP0.js.map
